{"version":3,"sources":["../../src/pages/checkout/checkout.module.ts","../../src/pages/checkout/checkout.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { Checkout } from './checkout';\n\n@NgModule({\n  declarations: [\n    Checkout,\n  ],\n  imports: [\n    IonicPageModule.forChild(Checkout),\n  ],\n  exports: [\n    Checkout\n  ]\n})\nexport class CheckoutPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/checkout/checkout.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport * as WC from 'woocommerce-api';\nimport { WoocommerceProvider } from '../../providers/woocommerce/woocommerce';\n\n@IonicPage({})\n@Component({\n    selector: 'page-checkout',\n    templateUrl: 'checkout.html',\n})\nexport class Checkout {\n\n    WooCommerce: any;\n    newOrder: any;\n    paymentMethods: any[];\n    paymentMethod: any;\n    billing_shipping_same: boolean;\n    userInfo: any;\n\n    constructor(public navCtrl: NavController, public navParams: NavParams, public storage: Storage,\n        public alertCtrl: AlertController, private WP: WoocommerceProvider) {\n        this.newOrder = {};\n        this.newOrder.billing = {};\n        this.newOrder.shipping = {};\n        this.billing_shipping_same = false;\n\n        this.paymentMethods = [\n            // { method_id: \"bacs\", method_title: \"Direct Bank Transfer\" },\n            // { method_id: \"cheque\", method_title: \"Cheque Payment\" },\n            { method_id: \"cod\", method_title: \"Cash on Delivery\" }]\n\n        this.WooCommerce = WP.init(true);\n\n        this.storage.get(\"userLoginInfo\").then((userLoginInfo) => {\n\n            this.userInfo = userLoginInfo.user;\n\n            let email = userLoginInfo.user.email;\n            let id = userLoginInfo.user.id;\n\n            this.WooCommerce.getAsync(\"customers/\" + id).then((data) => {\n\n                this.newOrder = JSON.parse(data.body);\n\n            })\n\n        })\n\n    }\n\n    setBillingToShipping() {\n        this.billing_shipping_same = !this.billing_shipping_same;\n\n        if (this.billing_shipping_same) {\n            this.newOrder.shipping = this.newOrder.billing;\n        }\n\n    }\n\n    placeOrder() {\n\n        let orderItems: any[] = [];\n        let data: any = {};\n\n        let paymentData: any = {};\n\n        this.paymentMethods.forEach((element, index) => {\n            if (element.method_id == this.paymentMethod) {\n                paymentData = element;\n            }\n        });\n\n\n        data = {\n\n            //Fixed a bug here. Updated in accordance with wc/v2 API\n            payment_method: paymentData.method_id,\n            payment_method_title: paymentData.method_title,\n            set_paid: true,\n\n            billing: this.newOrder.billing,\n            shipping: this.newOrder.shipping,\n            customer_id: this.userInfo.id || '',\n            line_items: orderItems\n        };\n\n        this.storage.get(\"cart\").then((cart) => {\n\n            cart.forEach((element, index) => {\n                if (element.variation) {\n                    orderItems.push({ product_id: element.product.id, variation_id: element.variation.id, quantity: element.qty });\n                    ///total = total + (element.variation.price * element.qty);\n                } else {\n                    orderItems.push({ product_id: element.product.id, quantity: element.qty });\n                    ///total = total + (element.product.price * element.qty);\n                }\n            });\n\n            data.line_items = orderItems;\n\n            let orderData: any = {};\n\n            orderData.order = data;\n\n            this.WooCommerce.postAsync(\"orders\", orderData.order).then((data) => {\n\n                let response = (JSON.parse(data.body));\n\n                this.alertCtrl.create({\n                    title: \"Order Placed Successfully\",\n                    message: \"Your order has been placed successfully. Your order number is \" + response.order_number,\n                    buttons: [{\n                        text: \"OK\",\n                        handler: () => {\n                            this.navCtrl.setRoot('HomePage');\n                        }\n                    }]\n                }).present();\n\n            })\n\n        })\n\n    }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/checkout/checkout.ts"],"sourceRoot":""}